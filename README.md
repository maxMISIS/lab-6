# lab-6







## **Найденные проблемы (code smells):**



###### process\_checkout слишком длинная (Long Function)

###### смешаны ответственности: разбор запроса, валидация, расчёты

###### много магических чисел (ставка налога, пороги, скидки)

###### сложные ветвления по купонам



## **Применённые рефакторинги:**



###### вынесены константы (магические числа → TAX\_RATE, SAVE20\_MIN\_SUBTOTAL и т.д.)

###### выделены функции: \_validate\_items, \_calc\_subtotal, \_calc\_discount, \_calc\_tax, \_make\_order\_id

###### process\_checkout стала короткой и читается сверху вниз как сценарий

###### поведение сохранено: тесты проходят до и после изменений



## Что стало проще:

###### 

###### легко добавлять новый купон (дополнить \_calc\_discount)

###### легко менять налог/пороги (константы)

###### валидация отделена от расчётов

